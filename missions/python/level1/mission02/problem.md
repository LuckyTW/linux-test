# 서버 접근 로그 분석기 코딩 시험

## 시험 개요

- **시간**: 15분
- **합격 기준**: 100점 만점 중 70점 이상
- **제출물**: 1개의 Python 파일 (`log_analyzer.py`)

CSV 형식의 서버 접근 로그를 분석하여 리포트를 생성하는 프로그램을 작성합니다.
CSV 파싱, 데이터 집계, 정렬, 파일 I/O, argparse CLI 능력을 측정합니다.

---

## 입력 데이터

`template/access_log_sample.csv`에 샘플 데이터가 제공됩니다.

### CSV 형식

| 컬럼 | 설명 | 예시 |
|------|------|------|
| `timestamp` | 접근 시간 (ISO 8601) | `2025-03-15T09:00:00` |
| `ip` | 클라이언트 IP | `192.168.1.1` |
| `method` | HTTP 메서드 | `GET`, `POST` |
| `endpoint` | API 경로 | `/api/users` |
| `status_code` | HTTP 상태코드 | `200`, `404`, `500` |
| `response_time_ms` | 응답시간 (밀리초) | `45`, `5200` |

---

## 요구사항

### 1. CLI 인터페이스

`argparse`를 사용하여 다음 인자를 받으세요:

```bash
python log_analyzer.py --log <CSV파일경로> --output <리포트출력경로>
```

| 인자 | 설명 |
|------|------|
| `--log` | 입력 CSV 파일 경로 |
| `--output` | 출력 리포트 파일 경로 |

---

### 2. 분석 항목 (3개 섹션)

#### 섹션 1: IP별 접근 횟수 TOP 5

- IP 주소별 접근 횟수를 집계합니다
- 접근 횟수가 많은 순서로 상위 5개를 출력합니다
- **정렬 기준**: 접근 횟수 내림차순, 동점 시 IP 주소 내림차순

#### 섹션 2: HTTP 상태코드 그룹별 비율

- 상태코드를 그룹별(2xx, 3xx, 4xx, 5xx)로 분류합니다
- 전체 요청 대비 각 그룹의 비율(%)을 계산합니다
- 소수점 1자리까지 표시합니다

#### 섹션 3: 느린 엔드포인트 TOP 3

- 엔드포인트별 평균 응답시간을 계산합니다
- 평균 응답시간이 긴 순서로 상위 3개를 출력합니다
- 소수점 1자리까지 표시합니다

---

### 3. 출력 형식 (report.txt)

```
=== IP Access Top 5 ===
192.168.1.1: 5
10.0.0.5: 4
172.16.0.10: 3
192.168.2.20: 1

=== Status Code Distribution ===
2xx: 61.5%
3xx: 7.7%
4xx: 7.7%
5xx: 15.4%

=== Slowest Endpoints Top 3 ===
/api/orders: 5200.0ms
/api/products: 70.3ms
/api/users: 47.2ms
```

> 위 수치는 샘플 CSV 기준입니다. 실제 채점 시 다른 데이터로 검증됩니다.

---

## 채점 기준

| # | 항목 | 배점 | 설명 |
|---|------|------|------|
| 1 | CSV 파싱 | 10점 | CSV 정상 파싱 + report.txt 생성 |
| 2 | IP TOP 5 값 | 15점 | IP별 접근 횟수 정확 |
| 3 | IP 정렬 순서 | 15점 | 동점 IP 내림차순 정렬 |
| 4 | 상태코드 비율 | 20점 | 그룹별 비율 정확 |
| 5 | 엔드포인트 순서 | 15점 | 느린 엔드포인트 TOP 3 순서 |
| 6 | 리포트 섹션 | 15점 | 3개 섹션 모두 포함 |
| 7 | 평균시간 수치 | 10점 | 엔드포인트 평균 응답시간 정확 |
| | **합계** | **100점** | |

---

## 주의사항

- `response_time_ms`는 정수 또는 소수일 수 있습니다
- IP가 비어 있는 행이 있을 수 있습니다 (데이터 정제 필요)
- 상태코드는 1xx~5xx 범위를 고려하세요
- 동점 정렬 기준을 정확히 구현하세요

---

## 제출 및 채점

```bash
# 채점 실행
python3 scripts/run_grading.py \
  --student-id <학생ID> \
  --mission-id python_level1_mission02 \
  --submission-dir /path/to/your/submission
```

---

**제출 기한**: 15분
**참고**: AI 어시스턴트를 활용할 수 있지만, 데이터 정제 및 정렬 로직은 반드시 직접 검증하세요.
